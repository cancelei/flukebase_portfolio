<%= form_with model: chat_message, url: chats_path, local: false, class: "chat-form" do |form| %>
  <div class="flex items-end space-x-4">
    <div class="flex-1">
      <%= form.text_area :question, 
          placeholder: "Ask me anything about experience, skills, projects, or availability...", 
          rows: 2,
          class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none transition-all duration-200",
          data: { 
            action: "keydown->chat#handleKeydown",
            chat_target: "input"
          } %>
      
      <% if chat_message.errors[:question].any? %>
        <p class="mt-2 text-sm text-red-600"><%= chat_message.errors[:question].first %></p>
      <% end %>
    </div>
    
    <div class="flex-shrink-0">
      <%= form.submit "Send", 
          class: "inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",
          data: { 
            disable_with: "Sending...",
            chat_target: "submit"
          } %>
    </div>
  </div>
  
  <div class="mt-3 flex items-center justify-between text-sm text-gray-500">
    <p>ðŸ’¡ Ask specific questions for better responses</p>
    <p>Press <kbd class="px-2 py-1 bg-gray-200 rounded text-xs">Ctrl+Enter</kbd> to send</p>
  </div>
<% end %>

<script>
  // Handle Ctrl+Enter to submit
  document.addEventListener('DOMContentLoaded', function() {
    const textarea = document.querySelector('#chat_message_question');
    if (textarea) {
      textarea.addEventListener('keydown', function(e) {
        if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
          e.preventDefault();
          this.closest('form').querySelector('input[type="submit"]').click();
        }
      });
    }
  });
</script> 